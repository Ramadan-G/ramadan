<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Ramazani 2026/1447</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #faf7f2;
            color: #5d4037;
            padding: 20px 16px 40px;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.5;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        h1, h2, h3, .card-header, .title h1, .stat-value, .location-badge, .next-badge, .info-badge, .prayer-time-item strong, .farz-item .name, .sunnah-item .name, .rakat-label, .dhikr-name, .field label, .footer {
            font-family: 'Amiri', serif;
        }

        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(250, 247, 242, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .login-card {
            background: white;
            border-radius: 32px;
            padding: 32px 24px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 40px rgba(179, 94, 58, 0.2);
            border: 1px solid #f5e1d4;
            text-align: center;
        }

        .login-card h2 {
            color: #b35e3a;
            font-size: 2rem;
            font-weight: 400;
            margin-bottom: 8px;
            font-family: 'Amiri', serif;
        }

        .login-card p {
            color: #8b6250;
            margin-bottom: 24px;
            font-family: 'Poppins', sans-serif;
        }

        .login-input {
            width: 100%;
            background: #fffaf5;
            border: 2px solid #ecd9c9;
            border-radius: 50px;
            padding: 16px 24px;
            font-size: 1.1rem;
            margin-bottom: 16px;
            outline: none;
            transition: border-color 0.2s;
            font-family: 'Poppins', sans-serif;
        }

        .login-input:focus {
            border-color: #e6b17e;
        }

        .login-btn {
            background: #e6b17e;
            border: none;
            border-radius: 50px;
            padding: 16px 32px;
            font-weight: 600;
            font-size: 1.1rem;
            color: white;
            cursor: pointer;
            width: 100%;
            box-shadow: 0 8px 16px rgba(230,177,126,0.3);
            transition: 0.1s;
            font-family: 'Poppins', sans-serif;
        }

        .login-btn:active {
            transform: scale(0.98);
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .title {
            background: #e6b17e;
            padding: 8px 20px;
            border-radius: 50px;
            box-shadow: 0 4px 10px rgba(230,177,126,0.4);
        }

        .title h1 {
            font-family: 'Amiri', serif;
            font-size: 2rem;
            font-weight: 700;
            color: white;
            letter-spacing: 0.5px;
            text-shadow: 2px 2px 0 #b35e3a;
        }

        .user-greeting {
            background: #fcf3ea;
            padding: 8px 16px;
            border-radius: 40px;
            font-weight: 500;
            color: #b35e3a;
            border: 1px solid #f5d7b3;
            font-size: 0.95rem;
            white-space: nowrap;
            font-family: 'Poppins', sans-serif;
        }

        .day-control {
            display: flex;
            align-items: center;
            gap: 10px;
            background: white;
            padding: 5px 15px;
            border-radius: 40px;
            border: 1px solid #f0dccc;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.02);
        }

        .day-arrow {
            background: #e6b17e;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-size: 1.8rem;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(230, 177, 126, 0.4);
            line-height: 1;
        }

        .day-arrow:active {
            transform: scale(0.95);
        }

        .day-display {
            font-weight: 600;
            font-size: 1.2rem;
            color: #7b5e4b;
            min-width: 90px;
            text-align: center;
            font-family: 'Amiri', serif;
        }

        .card {
            background: white;
            border-radius: 32px;
            padding: 24px 20px;
            margin-bottom: 24px;
            box-shadow: 0 10px 25px rgba(229, 198, 170, 0.15);
            border: 1px solid #f5e1d4;
            max-width: 100%;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.6rem;
            font-weight: 500;
            color: #b95b36;
            margin-bottom: 20px;
            border-bottom: 2px solid #f5e1d4;
            padding-bottom: 12px;
            font-family: 'Amiri', serif;
        }

        .card-header span {
            font-size: 2rem;
        }

        .location-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            flex-wrap: nowrap;
            gap: 8px;
        }
        .location-badge {
            background: #fefaf5;
            padding: 8px 12px;
            border-radius: 40px;
            border: 1px solid #f5dccf;
            font-weight: 500;
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 60%;
        }
        .next-badge {
            background: #e6b17e;
            color: white;
            padding: 8px 12px;
            border-radius: 40px;
            font-weight: 500;
            font-size: 0.9rem;
            white-space: nowrap;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            flex-wrap: nowrap;
            margin-bottom: 20px;
        }
        .info-badge {
            background: #fcf3ea;
            padding: 8px 12px;
            border-radius: 40px;
            border: 1px solid #f5d7b3;
            flex: 1;
            text-align: center;
            white-space: nowrap;
            font-size: 0.9rem;
        }
        .prayer-times-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-top: 16px;
        }
        .prayer-time-item {
            background: #fefaf5;
            border-radius: 30px;
            padding: 8px 4px;
            text-align: center;
            border: 1px solid #f5dccf;
            font-size: 0.8rem;
            font-family: 'Poppins', sans-serif;
        }
        .prayer-time-item strong {
            display: block;
            font-size: 1rem;
            font-weight: 600;
            font-family: 'Amiri', serif;
        }

        .farz-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 8px;
        }
        .farz-item {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #fefaf5;
            padding: 10px 16px;
            border-radius: 50px;
            border: 1px solid #f5dccf;
        }
        .farz-item input[type="checkbox"] {
            width: 24px;
            height: 24px;
            accent-color: #e6b17e;
        }
        .farz-item .name {
            font-weight: 500;
            font-size: 1rem;
        }

        .sunnah-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .sunnah-item {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #fefaf5;
            padding: 10px 16px;
            border-radius: 50px;
            border: 1px solid #f5dccf;
        }
        .sunnah-item .control {
            flex-shrink: 0;
            display: flex;
            align-items: center;
        }
        .sunnah-item .name {
            font-weight: 500;
            font-size: 1rem;
        }
        .sunnah-choice {
            display: flex;
            gap: 8px;
        }
        .choice-btn {
            background: transparent;
            border: 2px solid #ecd9c9;
            border-radius: 40px;
            padding: 6px 16px;
            font-size: 1rem;
            font-weight: 600;
            color: #5d4037;
            cursor: pointer;
            transition: 0.1s;
            min-width: 50px;
            font-family: 'Poppins', sans-serif;
        }
        .choice-btn.active-yes {
            background: #e6b17e;
            border-color: #e6b17e;
            color: white;
        }
        .choice-btn.active-no {
            background: #d0b7a8;
            border-color: #b3927e;
            color: white;
        }

        .rakat-selector {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 16px 0;
            background: #fef9f4;
            padding: 8px 16px;
            border-radius: 50px;
            border: 1px solid #f5d7b3;
        }
        .rakat-label {
            font-weight: 500;
            font-size: 1.1rem;
        }
        .rakat-controls {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .rakat-btn {
            background: #e6b17e;
            border: none;
            width: 42px;
            height: 42px;
            border-radius: 42px;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(230, 177, 126, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Poppins', sans-serif;
        }
        .rakat-num {
            font-size: 1.5rem;
            font-weight: 500;
            min-width: 40px;
            text-align: center;
            font-family: 'Amiri', serif;
        }

        /* Stili pÃ«r lutjet */
        .dhikr-list {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 6px;
        }
        .dhikr-item {
            background: #fefaf5;
            border-radius: 30px;
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid #f5dccf;
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .dhikr-checkbox {
            width: 40px;
            height: 40px;
            accent-color: #e6b17e;
            border-radius: 10px;
            flex-shrink: 0;
        }
        .dhikr-content {
            flex: 1;
        }
        .dhikr-name-arabic {
            font-family: 'Amiri', serif;
            font-size: 1.1rem;
            color: #b35e3a;
            margin-bottom: 4px;
        }
        .dhikr-name {
            font-size: 0.95rem;
            font-weight: 500;
            color: #5d4037;
        }
        .dhikr-number {
            font-family: 'Amiri', serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: #e6b17e;
            min-width: 80px;
            text-align: center;
            border-left: 2px solid #f5dccf;
            padding-left: 16px;
        }

        .page-input-group {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
            background: #fef7f0;
            padding: 16px;
            border-radius: 50px;
        }
        .page-input-group label {
            font-weight: 500;
        }
        .page-input-group input {
            background: white;
            border: 1px solid #e6cebc;
            border-radius: 40px;
            padding: 12px 18px;
            width: 90px;
            text-align: center;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
        }
        .progress-bg {
            background: #edd7c5;
            height: 16px;
            border-radius: 30px;
            width: 100%;
            margin: 16px 0 6px;
        }
        .progress-fill {
            background: #e6b17e;
            height: 16px;
            border-radius: 30px;
            width: 0%;
        }

        .field {
            margin: 22px 0;
        }
        .field label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #8b6250;
            font-size: 1.1rem;
        }
        .field input, .field textarea {
            width: 100%;
            background: #fffaf5;
            border: 1px solid #ecd9c9;
            border-radius: 30px;
            padding: 16px 20px;
            font-size: 1rem;
            resize: vertical;
            font-family: 'Poppins', sans-serif;
        }

        .save-btn {
            background: #e6b17e;
            border: none;
            border-radius: 50px;
            padding: 16px 32px;
            font-weight: 600;
            font-size: 1.1rem;
            color: white;
            cursor: pointer;
            box-shadow: 0 8px 16px rgba(230,177,126,0.3);
            width: 100%;
            margin-top: 10px;
            transition: 0.1s;
            font-family: 'Poppins', sans-serif;
        }
        .save-btn:active {
            transform: scale(0.98);
        }

        .footer {
            text-align: center;
            color: #aa8a76;
            font-size: 1rem;
            margin: 30px 0 10px;
        }

        .ad-card {
            background: #fff3e9;
            border: 2px solid #e6b17e;
            text-align: center;
        }
        .ad-title {
            font-size: 2rem;
            font-weight: 600;
            color: #b35e3a;
            margin-bottom: 4px;
            font-family: 'Amiri', serif;
        }
        .ad-subtitle {
            font-size: 1.2rem;
            font-style: italic;
            color: #8b6250;
            margin-bottom: 16px;
        }
        .ad-description {
            background: #fefaf5;
            border-radius: 30px;
            padding: 16px;
            margin: 16px 0;
            border: 1px solid #f5d7b3;
        }
        .ad-contact {
            background: #e6b17e;
            color: white;
            border-radius: 50px;
            padding: 16px;
            margin: 16px 0;
        }
        .ad-contact p {
            margin: 4px 0;
        }
        .ad-phone {
            font-size: 1.4rem;
            font-weight: 700;
            letter-spacing: 1px;
            font-family: 'Amiri', serif;
        }
        .ad-weight {
            font-size: 2.2rem;
            font-weight: 700;
            color: #b35e3a;
            margin: 16px 0 8px;
            font-family: 'Amiri', serif;
        }
        .ad-social {
            background: #fcf3ea;
            border-radius: 40px;
            padding: 12px;
            border: 1px solid #f5d7b3;
            margin: 16px 0;
        }
        .ad-footer {
            font-size: 1.3rem;
            font-weight: 600;
            color: #b35e3a;
            margin-top: 16px;
            font-family: 'Amiri', serif;
        }
    </style>
</head>
<body>
    <div id="loginOverlay" class="login-overlay">
        <div class="login-card">
            <h2>ğŸŒ™ Ramazani 2026/1447</h2>
            <p>Shkruaj emrin tÃ«nd pÃ«r tÃ« vazhduar</p>
            <input type="text" id="usernameInput" class="login-input" placeholder="Emri yt" autocomplete="off">
            <button class="login-btn" onclick="saveUsername()">Fillo</button>
        </div>
    </div>

    <div class="app" id="mainApp" style="display: none;">
        <div class="header">
            <div class="title">
                <h1>Ramazani 2026/1447</h1>
            </div>
            <div style="display: flex; gap: 8px; align-items: center;">
                <span class="user-greeting" id="userGreeting"></span>
                <div class="day-control">
                    <button class="day-arrow" onclick="changeDay(-1)">â€¹</button>
                    <span class="day-display" id="currentDay">Dita 1/30</span>
                    <button class="day-arrow" onclick="changeDay(1)">â€º</button>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header"><span>ğŸ•‹</span> Koha e namazeve</div>
            <div class="location-row">
                <div class="location-badge" id="locationDisplay">
                    <span>ğŸ“</span> Duke marrÃ« vendndodhjen...
                </div>
                <div class="next-badge" id="nextPrayerText">
                    Sabah pÃ«r 2h 15m
                </div>
            </div>
            <div class="info-row">
                <div class="info-badge">
                    ğŸŒ… Lindja e djellit: <strong id="sunriseTime">--:--</strong>
                </div>
                <div class="info-badge">
                    ğŸ“… <span id="hijriDate">Duke marrÃ«...</span>
                </div>
            </div>
            <div class="prayer-times-grid" id="prayerTimesContainer"></div>
        </div>

        <div class="card">
            <div class="card-header"><span>ğŸ•‹</span> Namazet farz</div>
            <div class="farz-grid">
                <div class="farz-item">
                    <input type="checkbox" id="farzSabah" class="farz-checkbox" onchange="saveCurrentDay()">
                    <span class="name">Sabah</span>
                </div>
                <div class="farz-item">
                    <input type="checkbox" id="farzDreka" class="farz-checkbox" onchange="saveCurrentDay()">
                    <span class="name">Dreka</span>
                </div>
                <div class="farz-item">
                    <input type="checkbox" id="farzIkindia" class="farz-checkbox" onchange="saveCurrentDay()">
                    <span class="name">Ikindia</span>
                </div>
                <div class="farz-item">
                    <input type="checkbox" id="farzAksham" class="farz-checkbox" onchange="saveCurrentDay()">
                    <span class="name">Akshami</span>
                </div>
                <div class="farz-item">
                    <input type="checkbox" id="farzJacia" class="farz-checkbox" onchange="saveCurrentDay()">
                    <span class="name">Jacia</span>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header"><span>ğŸ•Œ</span> Sunetet</div>
            <div class="sunnah-list">
                <div class="sunnah-item">
                    <div class="control sunnah-choice" id="sunnahSabah">
                        <button class="choice-btn" data-choice="yes" onclick="setSunnah('sabah', 'yes')">âœ“</button>
                        <button class="choice-btn" data-choice="no" onclick="setSunnah('sabah', 'no')">âœ—</button>
                    </div>
                    <span class="name">Sabah (2 rekate)</span>
                </div>
                <div class="sunnah-item">
                    <div class="control sunnah-choice" id="sunnahDreka1">
                        <button class="choice-btn" data-choice="yes" onclick="setSunnah('dreka1', 'yes')">âœ“</button>
                        <button class="choice-btn" data-choice="no" onclick="setSunnah('dreka1', 'no')">âœ—</button>
                    </div>
                    <span class="name">Dreka (4 rekate)</span>
                </div>
                <div class="sunnah-item">
                    <div class="control sunnah-choice" id="sunnahDreka2">
                        <button class="choice-btn" data-choice="yes" onclick="setSunnah('dreka2', 'yes')">âœ“</button>
                        <button class="choice-btn" data-choice="no" onclick="setSunnah('dreka2', 'no')">âœ—</button>
                    </div>
                    <span class="name">Dreka (2 rekate)</span>
                </div>
                <div class="sunnah-item">
                    <div class="control sunnah-choice" id="sunnahIkindia">
                        <button class="choice-btn" data-choice="yes" onclick="setSunnah('ikindia', 'yes')">âœ“</button>
                        <button class="choice-btn" data-choice="no" onclick="setSunnah('ikindia', 'no')">âœ—</button>
                    </div>
                    <span class="name">Ikindia (4 rekate)</span>
                </div>
                <div class="sunnah-item">
                    <div class="control sunnah-choice" id="sunnahAksham">
                        <button class="choice-btn" data-choice="yes" onclick="setSunnah('aksham', 'yes')">âœ“</button>
                        <button class="choice-btn" data-choice="no" onclick="setSunnah('aksham', 'no')">âœ—</button>
                    </div>
                    <span class="name">Akshami (2 rekate)</span>
                </div>
                <div class="sunnah-item">
                    <div class="control sunnah-choice" id="sunnahJacia1">
                        <button class="choice-btn" data-choice="yes" onclick="setSunnah('jacia1', 'yes')">âœ“</button>
                        <button class="choice-btn" data-choice="no" onclick="setSunnah('jacia1', 'no')">âœ—</button>
                    </div>
                    <span class="name">Jacia (4 rekate)</span>
                </div>
                <div class="sunnah-item">
                    <div class="control sunnah-choice" id="sunnahJacia2">
                        <button class="choice-btn" data-choice="yes" onclick="setSunnah('jacia2', 'yes')">âœ“</button>
                        <button class="choice-btn" data-choice="no" onclick="setSunnah('jacia2', 'no')">âœ—</button>
                    </div>
                    <span class="name">Jacia (2 rekate)</span>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header"><span>ğŸ•Œ</span> Namazet vullnetare</div>
            <div class="rakat-selector">
                <span class="rakat-label">Duha</span>
                <div class="rakat-controls">
                    <button class="rakat-btn" onclick="changeRakat('duha', -2)">âˆ’</button>
                    <span class="rakat-num" id="duhaRakat">0</span>
                    <button class="rakat-btn" onclick="changeRakat('duha', 2)">+</button>
                </div>
            </div>
            <div class="rakat-selector">
                <span class="rakat-label">Nafile</span>
                <div class="rakat-controls">
                    <button class="rakat-btn" onclick="changeRakat('nafile', -2)">âˆ’</button>
                    <span class="rakat-num" id="nafileRakat">0</span>
                    <button class="rakat-btn" onclick="changeRakat('nafile', 2)">+</button>
                </div>
            </div>
            <div class="rakat-selector">
                <span class="rakat-label">Tehexhud-i nates</span>
                <div class="rakat-controls">
                    <button class="rakat-btn" onclick="changeRakat('nate', -2)">âˆ’</button>
                    <span class="rakat-num" id="nateRakat">0</span>
                    <button class="rakat-btn" onclick="changeRakat('nate', 2)">+</button>
                </div>
            </div>
            <div class="rakat-selector">
                <span class="rakat-label">Teravite</span>
                <div class="rakat-controls">
                    <button class="rakat-btn" onclick="changeRakat('teravi', -2)">âˆ’</button>
                    <span class="rakat-num" id="teraviRakat">0</span>
                    <button class="rakat-btn" onclick="changeRakat('teravi', 2)">+</button>
                </div>
            </div>
        </div>

        <!-- LUTJET -->
        <div class="card">
            <div class="card-header"><span>ğŸ“¿</span> Lutjet (Dhikr)</div>
            <div class="dhikr-list" id="dhikrContainer"></div>
            <button class="save-btn" style="margin-top: 20px;" onclick="resetAllDhikr()">Rivendos tÃ« gjitha nÃ« 0</button>
        </div>

        <div class="card">
            <div class="card-header"><span>ğŸ“–</span> Kur'ani (faqe)</div>
            <div class="page-input-group">
                <label>Nga:</label>
                <input type="number" id="fromPage" value="1" min="1" max="604" onchange="saveCurrentDay()">
                <label>nÃ«:</label>
                <input type="number" id="toPage" value="1" min="1" max="604" onchange="saveCurrentDay()">
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span style="font-weight:500;">Sot: <span id="todayPages">0</span> faqe</span>
                <button class="save-btn" style="width:auto; padding:12px 24px;" onclick="calculatePages()">Ruaj</button>
            </div>
            <div style="margin-top: 24px;">
                <span>Gjithsej nÃ« muaj: <span id="totalPagesRead">0</span> / 604 faqe</span>
                <div class="progress-bg"><div class="progress-fill" id="quranProgress" style="width:0%"></div></div>
            </div>
        </div>

        <div class="card">
            <div class="card-header"><span>ğŸ¤²</span> Dua dhe reflektim</div>
            <div class="field">
                <label>Nje Hadith ne ditÃ«</label>
                <textarea id="hadith" rows="2" placeholder="Atij qÃ« agjÃ«ron njÃ« ditÃ« nÃ« rrugÃ«n e Allahut, Allahu do tâ€™ia largojÃ« fytyrÃ«n nga Zjarri pÃ«r shtatÃ«dhjetÃ« vjet." onchange="saveCurrentDay()"></textarea>
            </div>
            <div class="field">
                <label>Dua (lutja e ditÃ«s)</label>
                <textarea id="dua" rows="2" placeholder="O Allah, mÃ« jep forcÃ« dhe durim..." onchange="saveCurrentDay()"></textarea>
            </div>
            <div class="field">
                <label>Sadaka (â‚¬)</label>
                <input type="number" id="sadaka" value="0" min="0" step="0.5" placeholder="Shuma e dhÃ«nÃ«" onchange="saveCurrentDay()">
            </div>
            <div class="field">
                <label>Reflektimi ditor</label>
                <textarea id="reflection" rows="3" placeholder="Si u ndjeva sot? Ã‡farÃ« mund tÃ« pÃ«rmirÃ«soj?" onchange="saveCurrentDay()"></textarea>
            </div>
            <button class="save-btn" onclick="saveCurrentDay()">Ruaj tÃ« dhÃ«nat</button>
        </div>

        <div class="card ad-card">
            <img src="https://i.postimg.cc/FKDPHG2b/IMG-20260219-WA0000.jpg" alt="Hurme Sukeri" style="width:100%; border-radius:24px; margin-bottom:16px; border:2px solid #e6b17e;">
            <div class="ad-title">Hurme Sukeri</div>
            <div class="ad-subtitle">Shije qÃ« nuk harrohet!</div>
            <div class="ad-description">
                TÃ« Ã«mbla, tÃ« buta dhe super tÃ« freskÃ«ta.<br>
                Perfekte pÃ«r familje, mysafirÃ« dhe Ã§do tryezÃ«.
            </div>
            <div class="ad-contact">
                <p style="font-weight:600;">Shesim me shumicÃ« & pakicÃ«</p>
                <p><strong>Porosit tani:</strong></p>
                <p class="ad-phone">ğŸ“ 045 669 151</p>
                <p class="ad-phone">ğŸ“ 045 921 578</p>
            </div>
            <div class="ad-weight">3 Kg</div>
            <div class="ad-social">
                Na shkruani nÃ« Viber, WhatsApp, Instagram & Facebook.
            </div>
            <div class="ad-footer">
                HURME TAZE
            </div>
            <p style="color:#8b6250; margin-top:8px;">CilÃ«si, freski dhe besim!</p>
        </div>

        <div class="footer">ğŸŒ™ Ã‡do ditÃ« Ã«shtÃ« mundÃ«si</div>
    </div>

    <script>
        const dhikrList = [
            { name: "Subhanallah (100x)", arabic: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù" },
            { name: "Elhamdulilah (100x)", arabic: "Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù" },
            { name: "Allahu Ekber (100x)", arabic: "Ø§Ù„Ù„Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù" },
            { name: "Estagfirullah (100x)", arabic: "Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù" },
            { name: "La ilahe illallah Muhamedun Resulullah", arabic: "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ Ù…Ø­Ù…Ø¯ Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡" },
            { name: "SubhanAllahi ve bi hamdihi", arabic: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡Ù" },
            { name: "SubhanAllahi ve bi hamdihi, SubhanAllahil Adhim", arabic: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡ÙØŒ Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ù" },
            { name: "HasbijAllahu ve niâ€™mel vekil", arabic: "Ø­ÙØ³Ù’Ø¨ÙÙŠÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙÙ†ÙØ¹Ù’Ù…Ù Ø§Ù„Ù’ÙˆÙÙƒÙÙŠÙ„Ù" },
            { name: "La hawle ve la kuvvete illa billah", arabic: "Ù„ÙØ§ Ø­ÙÙˆÙ’Ù„Ù ÙˆÙÙ„ÙØ§ Ù‚ÙÙˆÙÙ‘Ø©Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù" },
            { name: "Salavatet", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ ØµÙÙ„ÙÙ‘ Ø¹ÙÙ„ÙÙ‰ Ù…ÙØ­ÙÙ…ÙÙ‘Ø¯Ù" },
            { name: "La ilahe illallah wahdehu la sherike leh, lehul mulku we lehul hamdu we huwe ala kuli shejin kadir", arabic: "Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡ÙØŒ Ù„ÙÙ‡Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ ÙˆÙÙ„ÙÙ‡Ù Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙÙ‡ÙÙˆÙ Ø¹ÙÙ„ÙÙ‰ ÙƒÙÙ„ÙÙ‘ Ø´ÙÙŠÙ’Ø¡Ù Ù‚ÙØ¯ÙÙŠØ±ÙŒ" },
            { name: "Estagfirullah ve etubu ilejh", arabic: "Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙØ£ÙØªÙÙˆØ¨Ù Ø¥ÙÙ„ÙÙŠÙ’Ù‡Ù" },
            { name: "Allahumme inni esâ€™elukeâ€™l xhenneh we eudhu bike mine nar (7x)", arabic: "Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ø§Ù„Ù’Ø¬ÙÙ†ÙÙ‘Ø©Ù ÙˆÙØ£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø±Ù" },
            { name: "Ihlas 13her", arabic: "Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙØ­ÙØ¯ÙŒ" },
            { name: "La ilahe illa ente subhaneke inni kuntu mine dhalimin", arabic: "Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø£ÙÙ†Ù’ØªÙ Ø³ÙØ¨Ù’Ø­ÙØ§Ù†ÙÙƒÙ Ø¥ÙÙ†ÙÙ‘ÙŠ ÙƒÙÙ†Ù’ØªÙ Ù…ÙÙ†Ù Ø§Ù„Ø¸ÙÙ‘Ø§Ù„ÙÙ…ÙÙŠÙ†Ù" },
            { name: "Hasbijallahu la ilahe ila huve, alejhi tevekeltu ve huve rabbul arshil adhim", arabic: "Ø­ÙØ³Ù’Ø¨ÙÙŠÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ù‡ÙÙˆÙØŒ Ø¹ÙÙ„ÙÙŠÙ’Ù‡Ù ØªÙÙˆÙÙƒÙÙ‘Ù„Ù’ØªÙ ÙˆÙÙ‡ÙÙˆÙ Ø±ÙØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙØ±Ù’Ø´Ù Ø§Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ù" }
        ];

        let currentDay = 1;
        let userName = '';
        let userCoords = null;
        let prayerTimes = [];
        let sunriseTimeStr = '--:--';
        let dayData = {};

        window.onload = function() {
            renderDhikr();
            setupSunnahChoices();
            document.getElementById('currentDay').innerText = `Dita ${currentDay}/30`;
            const savedUser = localStorage.getItem('ramadanUser');
            if (savedUser) {
                userName = savedUser;
                document.getElementById('userGreeting').innerText = `ğŸ‘¤ ${userName}`;
                document.getElementById('loginOverlay').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                loadAllData();
                getLocation();
            }
            setInterval(updatePrayerCard, 60000);
        };

        function saveUsername() {
            const input = document.getElementById('usernameInput');
            const name = input.value.trim();
            if (name) {
                userName = name;
                document.getElementById('userGreeting').innerText = `ğŸ‘¤ ${name}`;
                document.getElementById('loginOverlay').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                localStorage.setItem('ramadanUser', name);
                loadAllData();
                getLocation();
            } else {
                alert('Ju lutem shkruani emrin tuaj');
            }
        }

        function loadAllData() {
            const stored = localStorage.getItem(`ramadanData_${userName}`);
            if (stored) {
                dayData = JSON.parse(stored);
            } else {
                dayData = {};
            }
            loadDayData(currentDay);
            updateQuranTotal();
        }

        function saveAllData() {
            localStorage.setItem(`ramadanData_${userName}`, JSON.stringify(dayData));
        }

        function loadDayData(day) {
            const data = dayData[day] || createEmptyDayData();
            
            document.getElementById('farzSabah').checked = data.farz.sabah;
            document.getElementById('farzDreka').checked = data.farz.dreka;
            document.getElementById('farzIkindia').checked = data.farz.ikindia;
            document.getElementById('farzAksham').checked = data.farz.aksham;
            document.getElementById('farzJacia').checked = data.farz.jacia;

            setSunnahChoice('sunnahSabah', data.sunnah.sabah);
            setSunnahChoice('sunnahDreka1', data.sunnah.dreka1);
            setSunnahChoice('sunnahDreka2', data.sunnah.dreka2);
            setSunnahChoice('sunnahIkindia', data.sunnah.ikindia);
            setSunnahChoice('sunnahAksham', data.sunnah.aksham);
            setSunnahChoice('sunnahJacia1', data.sunnah.jacia1);
            setSunnahChoice('sunnahJacia2', data.sunnah.jacia2);

            document.getElementById('duhaRakat').innerText = data.voluntary.duha;
            document.getElementById('nafileRakat').innerText = data.voluntary.nafile;
            document.getElementById('nateRakat').innerText = data.voluntary.nate;
            document.getElementById('teraviRakat').innerText = data.voluntary.teravi;

            for (let i = 0; i < dhikrList.length; i++) {
                const checkbox = document.getElementById(`dhikr-check-${i}`);
                const numberDiv = document.getElementById(`dhikr-number-${i}`);
                if (checkbox) checkbox.checked = data.dhikr.checked[i] || false;
                if (numberDiv) numberDiv.innerText = data.dhikr.counts[i] || 0;
            }

            document.getElementById('fromPage').value = data.quran.fromPage;
            document.getElementById('toPage').value = data.quran.toPage;
            
            document.getElementById('hadith').value = data.hadithReflection?.hadith || '';
            document.getElementById('dua').value = data.duaReflection.dua || '';
            document.getElementById('sadaka').value = data.duaReflection.sadaka || 0;
            document.getElementById('reflection').value = data.duaReflection.reflection || '';
            
            calculatePages();
        }

        function createEmptyDayData() {
            return {
                farz: { sabah: false, dreka: false, ikindia: false, aksham: false, jacia: false },
                sunnah: { 
                    sabah: 'no', 
                    dreka1: 'no', 
                    dreka2: 'no', 
                    ikindia: 'no', 
                    aksham: 'no', 
                    jacia1: 'no', 
                    jacia2: 'no' 
                },
                voluntary: { duha: 0, nafile: 0, nate: 0, teravi: 0 },
                dhikr: {
                    checked: new Array(16).fill(false),
                    counts: new Array(16).fill(0)
                },
                quran: { fromPage: 1, toPage: 1 },
                duaReflection: { dua: '', sadaka: 0, reflection: '' },
                hadithReflection: { hadith: '' }
            };
        }

        function setSunnahChoice(containerId, value) {
            const container = document.getElementById(containerId);
            if (!container) return;
            const btns = container.querySelectorAll('.choice-btn');
            btns.forEach(btn => {
                btn.classList.remove('active-yes', 'active-no');
                if (btn.dataset.choice === value) {
                    btn.classList.add(value === 'yes' ? 'active-yes' : 'active-no');
                }
            });
        }

        function setSunnah(prayer, value) {
            const containerId = 'sunnah' + prayer.charAt(0).toUpperCase() + prayer.slice(1);
            setSunnahChoice(containerId, value);
            saveCurrentDay();
        }

        function saveCurrentDay() {
            const data = {
                farz: {
                    sabah: document.getElementById('farzSabah').checked,
                    dreka: document.getElementById('farzDreka').checked,
                    ikindia: document.getElementById('farzIkindia').checked,
                    aksham: document.getElementById('farzAksham').checked,
                    jacia: document.getElementById('farzJacia').checked
                },
                sunnah: {
                    sabah: getSunnahChoice('sunnahSabah'),
                    dreka1: getSunnahChoice('sunnahDreka1'),
                    dreka2: getSunnahChoice('sunnahDreka2'),
                    ikindia: getSunnahChoice('sunnahIkindia'),
                    aksham: getSunnahChoice('sunnahAksham'),
                    jacia1: getSunnahChoice('sunnahJacia1'),
                    jacia2: getSunnahChoice('sunnahJacia2')
                },
                voluntary: {
                    duha: parseInt(document.getElementById('duhaRakat').innerText) || 0,
                    nafile: parseInt(document.getElementById('nafileRakat').innerText) || 0,
                    nate: parseInt(document.getElementById('nateRakat').innerText) || 0,
                    teravi: parseInt(document.getElementById('teraviRakat').innerText) || 0
                },
                dhikr: {
                    checked: [],
                    counts: []
                },
                quran: {
                    fromPage: parseInt(document.getElementById('fromPage').value) || 1,
                    toPage: parseInt(document.getElementById('toPage').value) || 1
                },
                duaReflection: {
                    dua: document.getElementById('dua').value,
                    sadaka: parseFloat(document.getElementById('sadaka').value) || 0,
                    reflection: document.getElementById('reflection').value
                },
                hadithReflection: {
                    hadith: document.getElementById('hadith').value
                }
            };

            for (let i = 0; i < dhikrList.length; i++) {
                const checkbox = document.getElementById(`dhikr-check-${i}`);
                const numberDiv = document.getElementById(`dhikr-number-${i}`);
                data.dhikr.checked.push(checkbox ? checkbox.checked : false);
                data.dhikr.counts.push(parseInt(numberDiv.innerText) || 0);
            }

            dayData[currentDay] = data;
            saveAllData();
            updateQuranTotal();
        }

        function getSunnahChoice(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return 'no';
            const activeYes = container.querySelector('.choice-btn.active-yes');
            return activeYes ? 'yes' : 'no';
        }

        function updateQuranTotal() {
            let total = 0;
            for (let day = 1; day <= 30; day++) {
                const d = dayData[day];
                if (d && d.quran && d.quran.toPage && d.quran.fromPage) {
                    const pages = d.quran.toPage - d.quran.fromPage;
                    if (pages > 0) total += pages;
                }
            }
            document.getElementById('totalPagesRead').innerText = total;
            const percent = Math.min(100, (total / 604) * 100);
            document.getElementById('quranProgress').style.width = percent + '%';
        }

        function changeDay(delta) {
            saveCurrentDay();
            currentDay += delta;
            if (currentDay < 1) currentDay = 1;
            if (currentDay > 30) currentDay = 30;
            document.getElementById('currentDay').innerText = `Dita ${currentDay}/30`;
            loadDayData(currentDay);
        }

        function changeRakat(which, delta) {
            const el = document.getElementById(which + 'Rakat');
            let val = parseInt(el.innerText) || 0;
            val += delta;
            if (val < 0) val = 0;
            if (which === 'duha' && val > 24) val = 24;
            if (which === 'teravi' && val > 100) val = 100;
            if (which === 'nate' && val > 20) val = 20;
            if (which === 'nafile' && val > 100) val = 100;
            el.innerText = val;
            saveCurrentDay();
        }

        function calculatePages() {
            const from = parseInt(document.getElementById('fromPage').value) || 1;
            const to = parseInt(document.getElementById('toPage').value) || 1;
            if (to >= from) {
                document.getElementById('todayPages').innerText = to - from;
            }
            saveCurrentDay();
        }

        function renderDhikr() {
            const container = document.getElementById('dhikrContainer');
            container.innerHTML = '';
            dhikrList.forEach((item, index) => {
                const dhikrItem = document.createElement('div');
                dhikrItem.className = 'dhikr-item';
                dhikrItem.innerHTML = `
                    <input type="checkbox" class="dhikr-checkbox" id="dhikr-check-${index}" onchange="saveCurrentDay()">
                    <div class="dhikr-content">
                        <div class="dhikr-name-arabic">${item.arabic}</div>
                        <div class="dhikr-name">${index+1}. ${item.name}</div>
                    </div>
                    <div class="dhikr-number" id="dhikr-number-${index}" contenteditable="true" onblur="saveCurrentDay()">0</div>
                `;
                container.appendChild(dhikrItem);
            });
        }

        function resetAllDhikr() {
            for (let i = 0; i < dhikrList.length; i++) {
                const checkbox = document.getElementById(`dhikr-check-${i}`);
                const numberDiv = document.getElementById(`dhikr-number-${i}`);
                if (checkbox) checkbox.checked = false;
                if (numberDiv) numberDiv.innerText = '0';
            }
            saveCurrentDay();
        }

        function setupSunnahChoices() {
            const choiceContainers = document.querySelectorAll('.sunnah-choice');
            choiceContainers.forEach(container => {
                const btns = container.querySelectorAll('.choice-btn');
                btns.forEach(btn => {
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        btns.forEach(b => {
                            b.classList.remove('active-yes', 'active-no');
                        });
                        if (this.dataset.choice === 'yes') {
                            this.classList.add('active-yes');
                        } else {
                            this.classList.add('active-no');
                        }
                        saveCurrentDay();
                    });
                });
            });
        }

        function getLocation() {
            if (navigator.geolocation) {
                const timeoutId = setTimeout(() => {
                    showError({ code: 3, message: 'Timeout' });
                }, 10000);
                
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        clearTimeout(timeoutId);
                        showPosition(position);
                    },
                    showError,
                    { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
                );
            } else {
                document.getElementById('locationDisplay').innerHTML = 'ğŸ“ Geolokacioni nuk mbÃ«shtetet';
                useFallbackTimes();
            }
        }

        function showPosition(position) {
            userCoords = {
                lat: position.coords.latitude,
                lon: position.coords.longitude
            };
            
            fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${userCoords.lat}&lon=${userCoords.lon}`)
                .then(response => response.json())
                .then(data => {
                    const city = data.address.city || data.address.town || data.address.village || data.address.county || 'vendndodhja juaj';
                    document.getElementById('locationDisplay').innerHTML = `ğŸ“ ${city}`;
                })
                .catch(() => {
                    document.getElementById('locationDisplay').innerHTML = 'ğŸ“ Vendndodhja juaj';
                });

            fetch(`https://api.aladhan.com/v1/timings?latitude=${userCoords.lat}&longitude=${userCoords.lon}&method=3`)
                .then(response => {
                    if (!response.ok) throw new Error('Network response was not ok');
                    return response.json();
                })
                .then(data => {
                    if (data.code !== 200) throw new Error('API returned error');
                    
                    const timings = data.data.timings;
                    const hijri = data.data.date.hijri;
                    
                    const formatTime = (timeStr) => {
                        const match = timeStr.match(/(\d{1,2}):(\d{2})/);
                        return match ? `${match[1].padStart(2, '0')}:${match[2]}` : timeStr;
                    };
                    
                    // Dita reale nga API
                    const apiDay = parseInt(hijri.day);
                    // Dita qÃ« do tÃ« shfaqim nÃ« UI (minus 1, por jo mÃ« pak se 1)
                    const displayDay = apiDay > 1 ? apiDay - 1 : 1;
                    currentDay = displayDay;
                    
                    const month = 'Ramazan';
                    const year = hijri.year;
                    // Data hixhri e shfaqur pÃ«rdor displayDay (tÃ« njÃ«jtÃ«n si currentDay)
                    const hijriDateStr = `${displayDay.toString().padStart(2, '0')} ${month} ${year}`;
                    
                    prayerTimes = [
                        { name: 'Sabah', time: formatTime(timings.Fajr) },
                        { name: 'Dreka', time: formatTime(timings.Dhuhr) },
                        { name: 'Ikindia', time: formatTime(timings.Asr) },
                        { name: 'Akshami', time: formatTime(timings.Maghrib) },
                        { name: 'Jacia', time: formatTime(timings.Isha) }
                    ];
                    
                    sunriseTimeStr = formatTime(timings.Sunrise);
                    
                    document.getElementById('hijriDate').innerText = hijriDateStr;
                    document.getElementById('sunriseTime').innerText = sunriseTimeStr;
                    document.getElementById('currentDay').innerText = `Dita ${currentDay}/30`;
                    
                    loadDayData(currentDay);
                    updatePrayerCard();
                })
                .catch(error => {
                    console.error('Error fetching prayer times:', error);
                    useFallbackTimes();
                });
        }

        function showError(error) {
            console.warn('Geolocation error:', error);
            document.getElementById('locationDisplay').innerHTML = 'ğŸ“ Vendndodhja nuk u gjet, duke pÃ«rdorur oraret standarde...';
            useFallbackTimes();
        }

        function useFallbackTimes() {
            prayerTimes = [
                { name: 'Sabah', time: '05:40' },
                { name: 'Dreka', time: '12:43' },
                { name: 'Ikindia', time: '15:19' },
                { name: 'Akshami', time: '17:53' },
                { name: 'Jacia', time: '19:30' }
            ];
            sunriseTimeStr = '06:48';
            document.getElementById('sunriseTime').innerText = sunriseTimeStr;
            document.getElementById('hijriDate').innerText = '01 Ramazan 1447';
            currentDay = 1;
            document.getElementById('currentDay').innerText = `Dita ${currentDay}/30`;
            loadDayData(currentDay);
            updatePrayerCard();
        }

        function updatePrayerCard() {
            if (prayerTimes.length === 0) return;
            
            try {
                const now = getCurrentMinutes();
                const prayerMins = prayerTimes.map(p => {
                    const t = timeToMinutes(p.time);
                    return isNaN(t) ? 0 : t;
                });
                
                let nextIndex = prayerMins.findIndex(t => t > now);
                let timeUntil;
                if (nextIndex === -1) {
                    nextIndex = 0;
                    timeUntil = (24 * 60 - now) + prayerMins[0];
                } else {
                    timeUntil = prayerMins[nextIndex] - now;
                }
                
                const nextPrayer = prayerTimes[nextIndex];
                document.getElementById('nextPrayerText').innerHTML = `${nextPrayer.name} pÃ«r ${formatDuration(timeUntil)}`;

                const container = document.getElementById('prayerTimesContainer');
                container.innerHTML = '';
                prayerTimes.forEach(p => {
                    const div = document.createElement('div');
                    div.className = 'prayer-time-item';
                    div.innerHTML = `${p.name}<br><strong>${p.time}</strong>`;
                    container.appendChild(div);
                });
            } catch (e) {
                console.error('Error updating prayer card:', e);
            }
        }

        function getCurrentMinutes() {
            const now = new Date();
            return now.getHours() * 60 + now.getMinutes();
        }

        function timeToMinutes(timeStr) {
            if (!timeStr) return 0;
            const parts = timeStr.split(':');
            if (parts.length < 2) return 0;
            const h = parseInt(parts[0]) || 0;
            const m = parseInt(parts[1]) || 0;
            return h * 60 + m;
        }

        function formatDuration(min) {
            if (min < 0) min = 0;
            const h = Math.floor(min / 60);
            const m = min % 60;
            return `${h}h ${m}m`;
        }
    </script>
</body>
</html>
